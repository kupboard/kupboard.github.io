(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9566],{3905:function(t,e,n){"use strict";n.d(e,{Zo:function(){return d},kt:function(){return m}});var a=n(7294);function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},l=Object.keys(t);for(a=0;a<l.length;a++)n=l[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(a=0;a<l.length;a++)n=l[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var s=a.createContext({}),u=function(t){var e=a.useContext(s),n=e;return t&&(n="function"==typeof t?t(e):i(i({},e),t)),n},d=function(t){var e=u(t.components);return a.createElement(s.Provider,{value:e},t.children)},p={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},c=a.forwardRef((function(t,e){var n=t.components,r=t.mdxType,l=t.originalType,s=t.parentName,d=o(t,["components","mdxType","originalType","parentName"]),c=u(n),m=r,k=c["".concat(s,".").concat(m)]||c[m]||p[m]||l;return n?a.createElement(k,i(i({ref:e},d),{},{components:n})):a.createElement(k,i({ref:e},d))}));function m(t,e){var n=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=n.length,i=new Array(l);i[0]=c;var o={};for(var s in e)hasOwnProperty.call(e,s)&&(o[s]=e[s]);o.originalType=t,o.mdxType="string"==typeof t?t:r,i[1]=o;for(var u=2;u<l;u++)i[u]=n[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},2711:function(t,e,n){"use strict";n.r(e),n.d(e,{frontMatter:function(){return i},metadata:function(){return o},toc:function(){return s},default:function(){return d}});var a=n(2122),r=n(9756),l=(n(7294),n(3905)),i={},o={unversionedId:"getstarted/aws",id:"getstarted/aws",isDocsHomePage:!1,title:"AWS Marketplace",description:"Introduction",source:"@site/docs/getstarted/aws.md",sourceDirName:"getstarted",slug:"/getstarted/aws",permalink:"/docs/getstarted/aws",editUrl:"https://github.com/kupboard/kupboard-docs/edit/main/docs/getstarted/aws.md",version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Introduction",permalink:"/docs/intro"},next:{title:"Data",permalink:"/docs/getstarted/data"}},s=[{value:"Introduction",id:"introduction",children:[]},{value:"Subscription",id:"subscription",children:[]},{value:"Installation",id:"installation",children:[{value:"Login to registry",id:"login-to-registry",children:[]},{value:"Pull kupboard image",id:"pull-kupboard-image",children:[]},{value:"Run kupboard",id:"run-kupboard",children:[]},{value:"Bash script for running kupboard (Recommended)",id:"bash-script-for-running-kupboard-recommended",children:[]}]},{value:"Servers",id:"servers",children:[{value:"EC2 Instance",id:"ec2-instance",children:[]},{value:"Security Group",id:"security-group",children:[]}]}],u={toc:s};function d(t){var e=t.components,i=(0,r.Z)(t,["components"]);return(0,l.kt)("wrapper",(0,a.Z)({},u,i,{components:e,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"introduction"},"Introduction"),(0,l.kt)("p",null,"Kupboard can be run in any environment where Docker runtime is installed. This section explains how to install and run kupboard registered with AWS Marketplace, and how to use the kupboard commands to build cloud native environment with a simple configuration."),(0,l.kt)("h2",{id:"subscription"},"Subscription"),(0,l.kt)("p",null,"To use Kupboard, you should search for ",(0,l.kt)("inlineCode",{parentName:"p"},"kupboard")," in the AWS Marketplace and select ","[Continue to Subscribe]","."),(0,l.kt)("br",null),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"aws-install-01",src:n(5045).Z})),(0,l.kt)("br",null),(0,l.kt)("p",null,"When the subscription process is complete, select ","[Continue To Configuration]"," to go to the settings page."),(0,l.kt)("br",null),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"aws-install-02",src:n(2463).Z})),(0,l.kt)("br",null),(0,l.kt)("p",null,"Select Delivery Method and Software Version from the settings menu and select ","[Continue to Launch]","."),(0,l.kt)("br",null),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"aws-install-03",src:n(9319).Z})),(0,l.kt)("br",null),(0,l.kt)("p",null,"Now you are ready to run Kupboard. Select the ","[View container image details]"," link at the bottom of the page to see commands for pulling the Kupboard container image."),(0,l.kt)("br",null),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"aws-install-04",src:n(7387).Z})),(0,l.kt)("br",null),(0,l.kt)("h2",{id:"installation"},"Installation"),(0,l.kt)("p",null,"You must first install ",(0,l.kt)("inlineCode",{parentName:"p"},"awscli")," to use a maintainer registered with AWS Marketplace. If it's not installed, please visit ",(0,l.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-install.html"},"Installing, updating, and uninstalling the AWS CLI")),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"Before using ",(0,l.kt)("inlineCode",{parentName:"p"},"awscli"),", you must define the credentail of your AWS account as follows. If you're not  familiar with ",(0,l.kt)("inlineCode",{parentName:"p"},"awscli"),", please check ",(0,l.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/sdk-for-java/v1/developer-guide/setup-credentials.html"},"Set up AWS Credentials and Region for Development"),"."),(0,l.kt)("pre",{parentName:"div"},(0,l.kt)("code",{parentName:"pre"},"export AWS_ACCESS_KEY_ID=\nexport AWS_SECRET_ACCESS_KEY=\n")))),(0,l.kt)("h3",{id:"login-to-registry"},"Login to registry"),(0,l.kt)("p",null,"Before you pulll a container image from AWS Marketplace, you must first sign in to the registry of AWS Marketplace."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ aws ecr get-login-password --region us-east-1 | docker login --username AWS --password-stdin 709825985650.dkr.ecr.us-east-1.amazonaws.com\n")),(0,l.kt)("h3",{id:"pull-kupboard-image"},"Pull kupboard image"),(0,l.kt)("p",null,"If the login is successful, pull the container image."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ docker pull 709825985650.dkr.ecr.us-east-1.amazonaws.com/atop-cloud/kupboard:0.9.0\n")),(0,l.kt)("h3",{id:"run-kupboard"},"Run kupboard"),(0,l.kt)("p",null,"If the kupboard container is pulled properly, you should see the following results when using the ",(0,l.kt)("inlineCode",{parentName:"p"},"docker run")," command."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'$ docker run --rm -it 709825985650.dkr.ecr.us-east-1.amazonaws.com/atop-cloud/kupboard:0.9.0\n\n___   _  __   __  _______  _______  _______  _______  ______    ______\n|   | | ||  | |  ||       ||  _    ||       ||   _   ||    _ |  |      |\n|   |_| ||  | |  ||    _  || |_|   ||   _   ||  |_|  ||   | ||  |  _    |\n|      _||  |_|  ||   |_| ||       ||  | |  ||       ||   |_||_ | | |   |\n|     |_ |       ||    ___||  _   | |  |_|  ||       ||    __  || |_|   |\n|    _  ||       ||   |    | |_|   ||       ||   _   ||   |  | ||       |\n|___| |_||_______||___|    |_______||_______||__| |__||___|  |_||______|\nv0.9.0\n\n04:04:15.849 KBD \u25b6 INFO  [Configuration : kupboard]\n04:04:15.849 KBD \u25b6 INFO   version: v0.1\n04:04:15.849 KBD \u25b6 INFO   company: atopcloud\n04:04:15.849 KBD \u25b6 INFO   name: hello kupboard\n\n\nkupboard is a root command for managements of the Kupboard platform.\n\nUsage:\n  kupboard [flags]\n  kupboard [command]\n\nAvailable Commands:\n  build       Build application containers\n  collection  Deploy applications and install packages\n  deploy      Deploy services on target clusters\n  help        Help about any command\n  setup       Initialize target clusters\n  ssh         ssh connection to a target host\n\nFlags:\n      --config string   config file (default "kupboard")\n      --debug           enable debug\n  -e, --envvar string   ansible envvars\n  -h, --help            help for kupboard\n      --hide-log        diable logging\n      --hide-logo       hide kupboard logo\n\nUse "kupboard [command] --help" for more information about a command.\n')),(0,l.kt)("h3",{id:"bash-script-for-running-kupboard-recommended"},"Bash script for running kupboard (Recommended)"),(0,l.kt)("p",null,"Instead of using ",(0,l.kt)("inlineCode",{parentName:"p"},"docker run")," to run the kupboard container, you can use bash script below, which is much simpler."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'#!/bin/bash\ndocker run --rm -it 709825985650.dkr.ecr.us-east-1.amazonaws.com/atop-cloud/kupboard:0.9.0 "$@"\n')),(0,l.kt)("p",null,"This is an example of using the bash script to run kupboard."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ ./kupboard setup --init-user\n")),(0,l.kt)("p",null,"To mount a ",(0,l.kt)("inlineCode",{parentName:"p"},"data")," folder, use ",(0,l.kt)("inlineCode",{parentName:"p"},"-v")," option."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'#!/bin/bash\n$ docker run --rm -it -v $(pwd)/data:/kupboard/data 709825985650.dkr.ecr.us-east-1.amazonaws.com/atop-cloud/kupboard:0.9.0 "$@"\n')),(0,l.kt)("h2",{id:"servers"},"Servers"),(0,l.kt)("p",null,"Kupboard clusters can be configured in a variety of ways depending on the service and application. In this example, we will create 1 server for the admin cluster, 1 server for the gateway cluster, and 4 servers for the service cluster."),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"Ec2 instances are manually created and managed in version kupboard0.9, but the feature to automatically manage instances will be added in a future release."))),(0,l.kt)("h3",{id:"ec2-instance"},"EC2 Instance"),(0,l.kt)("p",null,"You need to create 6 EC2 instances as the table below. OS for all instances must be Ubuntu18.04 or 20.04, and all instances must use the same key pair.\nThe size of EBS volumes should change depending services or pakcages installed on the service cluster."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Cluster"),(0,l.kt)("th",{parentName:"tr",align:null},"EC2 Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Quantity"),(0,l.kt)("th",{parentName:"tr",align:null},"Boot Volume"),(0,l.kt)("th",{parentName:"tr",align:null},"EBS Volume"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Admin"),(0,l.kt)("td",{parentName:"tr",align:null},"t3.meidum <"),(0,l.kt)("td",{parentName:"tr",align:null},"1"),(0,l.kt)("td",{parentName:"tr",align:null},"50GB"),(0,l.kt)("td",{parentName:"tr",align:null},"N/A")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Gateway"),(0,l.kt)("td",{parentName:"tr",align:null},"t3.meidum <"),(0,l.kt)("td",{parentName:"tr",align:null},"1"),(0,l.kt)("td",{parentName:"tr",align:null},"50GB"),(0,l.kt)("td",{parentName:"tr",align:null},"N/A")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Service"),(0,l.kt)("td",{parentName:"tr",align:null},"t3.large <"),(0,l.kt)("td",{parentName:"tr",align:null},"4"),(0,l.kt)("td",{parentName:"tr",align:null},"50GB"),(0,l.kt)("td",{parentName:"tr",align:null},"50GB <")))),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"Instances of the service cluster must have EBS volumes. This does not require an additional format or mount operation because they are automatically controled by kupboard during cluster initialization."))),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"kupboard-0.9 only supports Ubuntu hosts, but future versions will also support CentOS."))),(0,l.kt)("h3",{id:"security-group"},"Security Group"),(0,l.kt)("p",null,"Create security groups for kupboard clusters and set Inbound and Outbound as shown below."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Cluster"),(0,l.kt)("th",{parentName:"tr",align:null},"Inbound"),(0,l.kt)("th",{parentName:"tr",align:null},"Source"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"All"),(0,l.kt)("td",{parentName:"tr",align:null},"22"),(0,l.kt)("td",{parentName:"tr",align:null},"0.0.0.0/0")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"1 - 65535"),(0,l.kt)("td",{parentName:"tr",align:null},"kupboard cluster")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Admin"),(0,l.kt)("td",{parentName:"tr",align:null},"80,443"),(0,l.kt)("td",{parentName:"tr",align:null},"0.0.0.0/0")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Gateway"),(0,l.kt)("td",{parentName:"tr",align:null},"80,443"),(0,l.kt)("td",{parentName:"tr",align:null},"0.0.0.0/0")))),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Cluster"),(0,l.kt)("th",{parentName:"tr",align:null},"Outbound"),(0,l.kt)("th",{parentName:"tr",align:null},"Destination"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"All"),(0,l.kt)("td",{parentName:"tr",align:null},"1 - 65535"),(0,l.kt)("td",{parentName:"tr",align:null},"0.0.0.0/0")))))}d.isMDXComponent=!0},5045:function(t,e,n){"use strict";e.Z=n.p+"assets/images/aws-install-01-50c9123a0bdcda7adc84d8e2c49307ba.png"},2463:function(t,e,n){"use strict";e.Z=n.p+"assets/images/aws-install-02-7ac0f3d2aaf6dec627a941542a01b2b6.png"},9319:function(t,e,n){"use strict";e.Z=n.p+"assets/images/aws-install-03-3a3c4b4b710607c048de8cc9ab3628e8.png"},7387:function(t,e,n){"use strict";e.Z=n.p+"assets/images/aws-install-04-ca5088eba189e1b541cc48602576fd96.png"}}]);