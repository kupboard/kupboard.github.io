(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1450],{3905:function(t,e,a){"use strict";a.d(e,{Zo:function(){return d},kt:function(){return m}});var n=a(7294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function o(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},l=Object.keys(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var u=n.createContext({}),c=function(t){var e=n.useContext(u),a=e;return t&&(a="function"==typeof t?t(e):i(i({},e),t)),a},d=function(t){var e=c(t.components);return n.createElement(u.Provider,{value:e},t.children)},p={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},s=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,l=t.originalType,u=t.parentName,d=o(t,["components","mdxType","originalType","parentName"]),s=c(a),m=r,k=s["".concat(u,".").concat(m)]||s[m]||p[m]||l;return a?n.createElement(k,i(i({ref:e},d),{},{components:a})):n.createElement(k,i({ref:e},d))}));function m(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=a.length,i=new Array(l);i[0]=s;var o={};for(var u in e)hasOwnProperty.call(e,u)&&(o[u]=e[u]);o.originalType=t,o.mdxType="string"==typeof t?t:r,i[1]=o;for(var c=2;c<l;c++)i[c]=a[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}s.displayName="MDXCreateElement"},2866:function(t,e,a){"use strict";a.r(e),a.d(e,{frontMatter:function(){return i},metadata:function(){return o},toc:function(){return u},default:function(){return d}});var n=a(2122),r=a(9756),l=(a(7294),a(3905)),i={},o={unversionedId:"getstarted/alibaba",id:"getstarted/alibaba",isDocsHomePage:!1,title:"Alibaba Cloud",description:"Set up Kupboard clusters",source:"@site/docs/getstarted/alibaba.md",sourceDirName:"getstarted",slug:"/getstarted/alibaba",permalink:"/docs/getstarted/alibaba",editUrl:"https://github.com/kupboard/kupboard-docs/edit/main/docs/getstarted/alibaba.md",version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"AZure",permalink:"/docs/getstarted/azure"},next:{title:"Naver Cloud Platform",permalink:"/docs/getstarted/ncloud"}},u=[{value:"Set up Kupboard clusters",id:"set-up-kupboard-clusters",children:[]},{value:"Introduction",id:"introduction",children:[]},{value:"ECS Instance",id:"ecs-instance",children:[]},{value:"VPC &amp; VSwitch",id:"vpc--vswitch",children:[]},{value:"Security Group",id:"security-group",children:[]},{value:"SSH Key",id:"ssh-key",children:[]},{value:"Data",id:"data",children:[]},{value:"Configuration Results",id:"configuration-results",children:[{value:"VPC",id:"vpc",children:[]},{value:"VSwitch",id:"vswitch",children:[]},{value:"Security Group",id:"security-group-1",children:[]},{value:"SSH Key Pair",id:"ssh-key-pair",children:[]}]}],c={toc:u};function d(t){var e=t.components,i=(0,r.Z)(t,["components"]);return(0,l.kt)("wrapper",(0,n.Z)({},c,i,{components:e,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"set-up-kupboard-clusters"},"Set up Kupboard clusters"),(0,l.kt)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/ioECrqvVk_s",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}),(0,l.kt)("h2",{id:"introduction"},"Introduction"),(0,l.kt)("p",null,"This section describes how to create and configure resources to build a kupboard cluster on Alibaba Cloud."),(0,l.kt)("h2",{id:"ecs-instance"},"ECS Instance"),(0,l.kt)("p",null,"Kupboard clusters can be configured in a variety of ways depending on the service and application. In this example, we will create 1 server for the admin cluster, 1 server for the gateway cluster, and 4 servers for the service cluster."),(0,l.kt)("p",null,"You need to create 6 ECS instances as the table below. OS for all instances must be Ubuntu18.04 or 20.04. The size of additional disks should change depending services or pakcages installed on the service cluster."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Cluster"),(0,l.kt)("th",{parentName:"tr",align:null},"Instance Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Quantity"),(0,l.kt)("th",{parentName:"tr",align:null},"Boot Disk"),(0,l.kt)("th",{parentName:"tr",align:null},"Additional Disk"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Admin"),(0,l.kt)("td",{parentName:"tr",align:null},"ecs.g7.large <"),(0,l.kt)("td",{parentName:"tr",align:null},"1"),(0,l.kt)("td",{parentName:"tr",align:null},"50GB"),(0,l.kt)("td",{parentName:"tr",align:null},"N/A")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Gateway"),(0,l.kt)("td",{parentName:"tr",align:null},"ecs.g7.large <"),(0,l.kt)("td",{parentName:"tr",align:null},"1"),(0,l.kt)("td",{parentName:"tr",align:null},"50GB"),(0,l.kt)("td",{parentName:"tr",align:null},"N/A")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Service"),(0,l.kt)("td",{parentName:"tr",align:null},"ecs.g7.large <"),(0,l.kt)("td",{parentName:"tr",align:null},"4"),(0,l.kt)("td",{parentName:"tr",align:null},"50GB"),(0,l.kt)("td",{parentName:"tr",align:null},"50GB <")))),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"The available instance types are different by regions and zone. You need to check which instance types are similar to the specification below."),(0,l.kt)("ul",{parentName:"div"},(0,l.kt)("li",{parentName:"ul"},"2 vCPUs / 4GiB MEM for Admin and Gateway"),(0,l.kt)("li",{parentName:"ul"},"2 vCPUs / 8GiB MEM for Sevice")))),(0,l.kt)("h2",{id:"vpc--vswitch"},"VPC & VSwitch"),(0,l.kt)("p",null,"We need to create a VPC with a CIDR block ",(0,l.kt)("inlineCode",{parentName:"p"},"172.16.0.0/20")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"172.x.0.0/20"),". VSwitch works similarly to subnets and  it must be created in the same zone where the instance is created."),(0,l.kt)("h2",{id:"security-group"},"Security Group"),(0,l.kt)("p",null,"Create a security group for the VSwitch created above."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Cluster"),(0,l.kt)("th",{parentName:"tr",align:null},"Inbound"),(0,l.kt)("th",{parentName:"tr",align:null},"Source"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"All"),(0,l.kt)("td",{parentName:"tr",align:null},"22"),(0,l.kt)("td",{parentName:"tr",align:null},"0.0.0.0/0")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null}),(0,l.kt)("td",{parentName:"tr",align:null},"1 - 65535"),(0,l.kt)("td",{parentName:"tr",align:null},"vswitch cidr")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Admin"),(0,l.kt)("td",{parentName:"tr",align:null},"80,443"),(0,l.kt)("td",{parentName:"tr",align:null},"0.0.0.0/0")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"Gateway"),(0,l.kt)("td",{parentName:"tr",align:null},"80,443"),(0,l.kt)("td",{parentName:"tr",align:null},"0.0.0.0/0")))),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Cluster"),(0,l.kt)("th",{parentName:"tr",align:null},"Outbound"),(0,l.kt)("th",{parentName:"tr",align:null},"Destination"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"All"),(0,l.kt)("td",{parentName:"tr",align:null},"1 - 65535"),(0,l.kt)("td",{parentName:"tr",align:null},"0.0.0.0/0")))),(0,l.kt)("h2",{id:"ssh-key"},"SSH Key"),(0,l.kt)("p",null,"In order to initialize the servers, you must first register the SSH Key. A new key-pair can be generated with the command below, and the generated keys can be found in ",(0,l.kt)("inlineCode",{parentName:"p"},"data/certs"),". Go to ",(0,l.kt)("inlineCode",{parentName:"p"},"Elastic Compute Service > Key Pairs > Create SSH Key Pair")," and import the public key."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ kupboard --keygen\n")),(0,l.kt)("p",null,"Then you can use the following command to initialize user settings."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ kupboard setup --init-user --root-username root\n")),(0,l.kt)("h2",{id:"data"},"Data"),(0,l.kt)("p",null,"Move to ",(0,l.kt)("a",{parentName:"p",href:"/docs/getstarted/data"},"Data")),(0,l.kt)("h2",{id:"configuration-results"},"Configuration Results"),(0,l.kt)("h3",{id:"vpc"},"VPC"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},(0,l.kt)("img",{alt:"kupboard-ali-vpc",src:a(6602).Z}))))),(0,l.kt)("h3",{id:"vswitch"},"VSwitch"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},(0,l.kt)("img",{alt:"kupboard-ali-vswitch",src:a(3707).Z}))))),(0,l.kt)("h3",{id:"security-group-1"},"Security Group"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},(0,l.kt)("img",{alt:"kupboard-ali-security-group",src:a(3506).Z}))))),(0,l.kt)("h3",{id:"ssh-key-pair"},"SSH Key Pair"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},(0,l.kt)("img",{alt:"kupboard-ali-keypair",src:a(3894).Z}))))))}d.isMDXComponent=!0},3894:function(t,e,a){"use strict";e.Z=a.p+"assets/images/ali-keypair-52243d4498059d14f50720775712f5af.png"},3506:function(t,e,a){"use strict";e.Z=a.p+"assets/images/ali-security-group-8cc8726b39242a20a4c684a1ffffb820.png"},6602:function(t,e,a){"use strict";e.Z=a.p+"assets/images/ali-vpc-6ae7f4f1d33eb7e6558a513b53b540fc.png"},3707:function(t,e,a){"use strict";e.Z=a.p+"assets/images/ali-vswitch-56a830e856282c78d55a55be1a3ec61c.png"}}]);